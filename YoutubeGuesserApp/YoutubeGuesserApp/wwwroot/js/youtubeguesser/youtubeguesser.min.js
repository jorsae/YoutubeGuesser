function init(){setLoadingAnimationSize();getRequest(getVideosUrl,callbackGetVideos)}function checkViews(n,t){if(showingTutorial){tutorialToggle();return}if(clickable){clickable=!1;var i=getVideosUrl+"/"+n+"/"+t;getRequest(i,callbackGetViews)}}function callbackGetVideos(n){var u=document.getElementById("loadingAnimation"),t,i,r;if(u.style.display="none",t=JSON.parse(n.responseText),t.length!==2){console.log("Something went wrong");return}i=t[0];r=t[1];changeVideoInformation(1,i,r.videoId);changeVideoInformation(2,r,i.videoId);addVideo(i);addVideo(r);clickable=!0}function callbackGetViews(n){var t;if(n.status===400){console.log("Cheater detected");return}if(t=JSON.parse(n.responseText),addViewCount(t.videoGuessed),addViewCount(t.videoNotGuessed),!t.correct){var r=JSON.stringify(videoHistory),u=btoa(unescape(encodeURIComponent(r))),i=$('<form action="/youtubeguesser/gameover" method="post" style="display:none;"><input type="text" name="encodedData" value="'+u+'" /><\/form>');$("body").append(i);i.submit();return}resetVideos(t);getRequest(getVideosUrl,callbackGetVideos)}function setLoadingAnimationSize(){var i=window.innerWidth>window.innerHeight?window.innerHeight:window.innerWidth,t=i/5,n=document.getElementById("loadingAnimation");n!==null&&(n.style.width=t+"px",n.style.height=t+"px")}function resetVideos(n){var t,i,r;try{t=document.querySelectorAll('[videoid="'+n.videoGuessed.videoId+'"]')[0];i=document.querySelectorAll('[videoid="'+n.videoNotGuessed.videoId+'"]')[0];t.classList.add("correct-image");i.classList.add("wrong-image")}catch(u){console.log(u)}r=document.getElementById("score");r.innerHTML="Score: "+n.correctGuesses}function changeVideoInformation(n,t,i){var u=document.getElementById("videoTitle"+n),r;u.innerHTML=t.title;r=document.getElementById("videoImage"+n);r.classList="";r.setAttribute("src","https://i.ytimg.com/vi/"+t.videoId+"/hqdefault.jpg");r.setAttribute("alt","Picture of YouTube video option "+n+', with title "'+t.title+'"');r.setAttribute("videoId",t.videoId);r.onclick=function(){checkViews(t.videoId,i)}}function addVideo(n){videoHistory.push(n)}function addViewCount(n){for(var t=videoHistory.length-1;t>=0;t--)if(videoHistory[t].videoId==n.videoId){videoHistory[t].viewCount=n.viewCount;break}}var clickable,videoHistory;const getVideosUrl="/api/videosapi";clickable=!0;window.onload=init;videoHistory=[];